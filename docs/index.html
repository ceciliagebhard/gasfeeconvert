<!DOCTYPE html>
<html lang="es">

<head>
    <link rel="stylesheet" href="index.css">
    <meta charset="UTF-8">
    <title>Calculadora de Gas ETH</title>
    <link rel="icon" type="image/png" href="gasfeefavicon.png">
</head>

<body>
    <h1>Calculadora de Costo de Transferencia</h1>
    <label for="gasLimit">Gas Limit:</label>
    <input id="gasLimit" type="number" value="21000">
    <button onclick="calcular()">Calcular</button>
    <div id="resultado"></div>

    <script>
        async function calcular() {
            const gasLimit = parseInt(document.getElementById("gasLimit").value);

            // 1. Obtener gas price desde Etherscan
            const etherscanKey = "VYA59KWCM3ZDQ24FKNVRKPYHYEKQSF7ZRP"; //"TU_API_KEY"
            const gasResp = await fetch(`https://api.etherscan.io/api?module=gastracker&action=gasoracle&apikey=${etherscanKey}`);
            const gasData = await gasResp.json();
            const gasPriceGwei = gasData.result.ProposeGasPrice; // en gwei
            const gasPriceEth = gasPriceGwei / 1e9;

            // 2. Calcular costo en ETH
            const costoEth = gasLimit * gasPriceEth;

            // 3. Obtener precio actual ETH en USD y ARS desde CoinGecko
            const priceResp = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd,ars");
            const priceData = await priceResp.json();
            const ethUsd = priceData.ethereum.usd;
            const ethArs = priceData.ethereum.ars;

            // 4. Convertir
            const costoUsd = costoEth * ethUsd;
            const costoArs = costoEth * ethArs;

            // 5. Mostrar
            document.getElementById("resultado").innerHTML = `
        Gas Price: ${gasPriceGwei} gwei <br>
        Costo en ETH: ${costoEth.toFixed(8)} ETH <br>
        Costo en USD: $${costoUsd.toFixed(2)} <br>
        Costo en ARS: $${costoArs.toFixed(2)}
      `;
        }
    </script>
</body>

</html>
